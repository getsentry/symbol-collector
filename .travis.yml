language: csharp
env:
  global:
    - DOTNET_CLI_TELEMETRY_OPTOUT=1
dotnet: 3.0.100
mono: 6.0.0
matrix:
  include:
    - os: osx
      osx_image: xcode11.2
script:
  - brew cask install android-sdk
  - export ANDROID_HOME=/usr/local/share/android-sdk
  - export AndroidSdkDirectory=ANDROID_HOME
  - export ANDROID_SDK_ROOT=$ANDROID_HOME
  - mkdir -p "$ANDROID_SDK_ROOT/licenses"
  - echo -e "\nd56f5187479451eabf01fb78af6dfcb131a6481e" > "$ANDROID_SDK_ROOT/licenses/android-sdk-license"
  - brew update
  - brew cask install adoptopenjdk/openjdk/adoptopenjdk8
  - export JAVA_HOME=$(/usr/libexec/java_home -v 1.8)
  - yes | sdkmanager --licenses >> yes | sdkmanager --update
  - dotnet tool install --global boots
  - boots https://aka.ms/xamarin-android-commercial-d16-2-macos
  - ./build.sh
after_success:
  - curl -s https://codecov.io/bash > codecov
  - chmod +x codecov
  - ./codecov -f "*opencover.xml"
